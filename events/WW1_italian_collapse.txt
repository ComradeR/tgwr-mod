add_namespace = garibaldi

#Victor Emmannuel abdicates
country_event = {
	id = garibaldi.1
	title = garibaldi.1.t
	desc = garibaldi.1.d
	fire_only_once = yes
	picture = GFX_report_event_royal_parade
	mean_time_to_happen = {
		days = 14
	}
	trigger = {
		tag = ITA
		has_country_flag = great_war_loser
		OR = {
			has_global_flag = versallies_treaty
			has_global_flag = frankfurt_treaty
		}
	}
	option = {
		name = garibaldi.1.a
		retire_ideology_leader = neutrality
		create_country_leader = { 
			name = "Umberto II"
			#picture = "gfx/leaders/ITA/ITA_prince_umberto.dds"
			expire="1935.1.1" 
			ideology = autocracy
			traits = {} 
		}
		hidden_effect = {
			remove_ideas = victor_emmanuel
			news_event = { id = garibaldi.2 hours = 1 }
			country_event = { id = garibaldi.3 days = 6}
			country_event = { id = garibaldi.5 days = 19}
		}
	}
}
#Victor abdication news event
news_event = {
	id = garibaldi.2
	title = garibaldi.2.t
	desc = garibaldi.2.d
	picture = GFX_news_event_royal_visit
	major = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.2.a
	}
}
#Socialist riots in North Italy
country_event = {
	id = garibaldi.3
	title = garibaldi.3.t
	desc = garibaldi.3.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 158
						state = 159
						state = 161
						state = 162
						state = 834
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				set_demilitarized_zone = yes
			}

			add_popularity = { ideology = communism popularity = 0.2 }
		}
	}
	option = {
		name = garibaldi.3.a
		add_stability = -0.1
	}
}
#Republican Split
country_event = {
	id = garibaldi.4
	title = garibaldi.4.t
	desc = garibaldi.4.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_spain_civil_war_volunteers_02
	immediate = {
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ITA
				save_event_target_as = italy_socialist
				every_state = {
					limit = {
						is_core_of = ROOT
					}
					add_core_of = PREV
				}
				set_capital = 161
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				set_popularities = {
					democratic = 17
					neutrality = 0
					fascism = 4
					communism = 79
				}
				set_country_flag = ITA_socialist_italy_flag
				set_cosmetic_tag = SRI
				create_country_leader = { 
					name = "Giacinto Menotti Serrati"
					picture = "gfx/leaders/ITA/ITA_giacinto_menotti_serrati.dds" 
					expire="1935.1.1" 
					ideology = marxism 
					traits = { } 
				}
				set_party_name = {
					ideology = democratic
					long_name = ITA_democratic_reformist_party_long
					name = ITA_democratic_reformist_party
				}
			}
			every_state = {
				limit = {
					OR = {
						state = 158
						state = 159
						state = 161
						state = 162
						state = 834
						state = 160
						state = 39
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				SRI = {
					transfer_state = PREV
					remove_state_claim = PREV
					add_state_core = PREV
				}
			}
			SRI = {
				leave_faction = yes
				create_faction = italian_popular_front
				inherit_technology = ITA
				add_ideas = ITA_death_before_surrender
			}
			ITA = {
				add_popularity = {
				   ideology = communism
   					popularity = -0.5
				}
				transfer_units_fraction= {
					target = SRI
					size = 0.6
					stockpile_ratio = 0.7
					army_ratio = 0.7
					navy_ratio = 0.4
					air_ratio = 0.6
				}
				declare_war_on = {
 					target = SRI
					type = civil_war
				}
				if = {
					limit = {
						SRI = {owns_state = 162}
					}	
					set_province_controller = 6973
					162 = {
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 6973
						}
					}
				}	
				if = {
					limit = {
						SRI = {owns_state = 160}
					}	
					set_province_controller = 11584
					set_province_controller = 3604
					set_province_controller = 6656
					160 = {
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 11584
						}
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 3604
						}
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 6656
						}
					}
				}
				if = {
					limit = {
						SRI = {owns_state = 159}
					}
					159 = {
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 11568
						}
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 6661
						}
					}
				}
				if = {
					limit = {
						SRI = {owns_state = 158}
					}	
					set_province_controller = 11721
					set_province_controller = 770
					set_province_controller = 9738
					158 = {
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 9738
						}
						create_unit = {
							division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
							owner = PREV
							prioritize_location = 770
						}
					}
				}
			}	
			ITS = {
				declare_war_on = {
 					target = SRI
					type = civil_war
				}	
			}	
		}		
	}
	option = {
		name = garibaldi.4.a
	}
	option = {
		name = garibaldi.4.b
		ai_chance = { factor = 0 }
		SRI = { change_tag_from = ROOT }
	}
}
#Republican coup 
country_event = {
	id = garibaldi.5
	title = garibaldi.5.t
	desc = garibaldi.5.d
	picture = GFX_report_event_saf_coup
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			ITA = {
				set_politics = {
					ruling_party = democratic
				}
				set_country_flag = ITA_republican_italy_flag
				set_cosmetic_tag = ROI
				add_popularity = { ideology = democratic popularity = 0.35 }
			}
			set_popularities = {
				democratic = 38
				neutrality = 25
				fascism = 9
				communism = 28
			}
			create_country_leader = { 
				name = "Francesco Saverio Nitti"
				picture = "gfx/leaders/ITA/ITA_francesco_saverio_nitti.dds" 
				expire="1935.1.1" 
				ideology = socialism
				traits = { } 
			}
			set_party_name = {
				ideology = neutrality
				long_name = ITA_neutrality_monarchist_party_long
				name = ITA_neutrality_monarchist_party
			}
			country_event = { id = garibaldi.6 days = 17 }
			clr_country_flag = color_democratic_italy
			every_state = {
				limit = {
					OR = {
						state = 115
						state = 117
						state = 156
						state = 157
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				set_demilitarized_zone = yes
			}
		}
	}	
	option = {
		name = garibaldi.5.a
		retire_ideology_leader = neutrality
		set_party_name = {
			ideology = democratic
			long_name = ITA_democratic_republican_party_long
			name = ITA_democratic_republican_party
		}
		add_stability = -0.05
		hidden_effect = { country_event = { id = garibaldi.6 days = 17 } }
	}
}
#Southern Monarchists declare restoration of the monarchy
country_event = {
	id = garibaldi.6
	title = garibaldi.6.t
	desc = garibaldi.6.d
	picture = GFX_report_event_ger_civil_war
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ITA
				save_event_target_as = italy_monarchist
				every_state = {
					limit = {
						is_core_of = ROOT
					}
					add_core_of = PREV
				}
				set_capital = 161
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				set_popularities = {
					democratic = 31
					neutrality = 59
					fascism = 6
					communism = 4
				}
				set_party_name = {
					ideology = democratic
					long_name = ITA_democratic_ldr_party_long
					name = ITA_democratic_ldr_party
				}
				set_country_flag = ITA_monarchist_italy_flag
				set_cosmetic_tag = ITS
				create_country_leader = { 
					name = "Provisional Government of Naples"
					expire="1935.1.1" 
					ideology = oligarchism
					traits = { } 
				}
			}
			every_state = {
				limit = {
					OR = {
						state = 115
						state = 117
						state = 156
						state = 157
						state = 39
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				ITS = {
					transfer_state = PREV
					remove_state_claim = PREV
					add_state_core = PREV
				}
			}
			ITS = {
				inherit_technology = ITA		  
				leave_faction = yes
				set_rule = { can_join_factions = no }
				set_capital = 117
				add_ideas = ITA_death_before_surrender
				add_ideas = ITA_idea_mafia #The mafia was the strongest in Sicily.
				if = {
					limit = {
						ITA = {owns_state = 114}
					}	
				   set_province_controller = 11773
				}
				
				if = {
					limit = {
						ITA = {owns_state = 835}
					}	
					set_province_controller = 923
					set_province_controller = 11882
				}

				country_event = { id = garibaldi.8 days = 40 }
			}
			ITA = {
				remove_ideas = idea_army_restrictions
				remove_ideas = ITA_ww1_Risorgimento
				leave_faction = yes
				set_rule = { can_join_factions = no }
				add_ideas = ITA_death_before_surrender
				remove_ideas = ww1_Scramble_for_Africa
				remove_ideas = ITA_idea_mafia
				remove_ideas = idea_italy_triple_alliance
				division_template = {
					name = "Milizia Repubblicana"
					is_locked = yes
					division_names_group = ITA_INF_01
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
					}
				}
				add_popularity = {
				   ideology = neutrality
   					popularity = -0.5
				}
				declare_war_on = {
 					target = ITS
					type = civil_war
				}
				transfer_units_fraction= {
					target = ITS
					size = 0.4
					stockpile_ratio = 0.4
					army_ratio = 0.45
					navy_ratio = 0.5
					air_ratio = 0.35
				}
				if = {
					limit = {
						ITS = {owns_state = 156}
					}
					set_province_controller = 10027
					set_province_controller = 3901	
				}
				if = {
					limit = {
						ITS = {owns_state = 117}
					}
					set_province_controller = 6980
					set_province_controller = 6939
					set_province_controller = 883
				}
				if = {
					limit = {
						ITS = {owns_state = 115}
					}	
					set_province_controller = 4014
				}	
				
				country_event = { id = garibaldi.4 days = 19}
			}
			every_state = {
				limit = {
					OR = {
						state = 115
						state = 117
						state = 156
						state = 157
						state = 158
						state = 162
						state = 834
						state = 835
					}
					is_owned_by = ITA
					is_controlled_by = ITA
				}
				set_demilitarized_zone = no
			}
			
			news_event = { id = garibaldi.7 hours = 1 }

			every_state = {
				limit = {
					is_core_of = LBA
					is_owned_by = ITA
				}
				LBA = {
					transfer_state = PREV
				}					
			}
			every_state = {
				limit = {
					is_core_of = SOM
					is_owned_by = ITA
				}
				SOM = {
					transfer_state = PREV
				}
			}
			if = {
				limit = {
					547 = {
						is_owned_by = ENG
					}
					792 = {
						is_owned_by = ITA
					}
				}
				ENG = {
					transfer_state = 792
				}
			}
			if = {
				limit = {
					547 = {
						is_owned_by = KEN
					}
					792 = {
						is_owned_by = ITA
					}
				}
				KEN = {
					transfer_state = 792
				}
			}
			if = {
				limit = {
					ETH = { exists = yes has_war = no NOT = {has_country_flag = great_war_loser}}		
				}	
				every_state = {
					limit = {
						is_core_of = ERI
						is_owned_by = ITA
					}
					ETH = {
						transfer_state = PREV
					}
				}
				else = {
					every_state = {
						limit = {
							is_core_of = ERI
							is_owned_by = ITA
						}
						ERI = {
							transfer_state = PREV
						}
					}
				}	
			}
			ITA = {
				every_state = {
					teleport_armies = {
						to_state_array = owned_controlled_states
					}
				}	
			}
			ITS = {
				every_state = {
					teleport_armies = {
						to_state_array = owned_controlled_states
					}
				
				}
			}
			if = {
				limit = {
					ITA = {owns_state = 114}
				}
				114 = {
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 11874
					}
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 902
					}
				}
			}
			if = {
				limit = {
					ITS = {owns_state = 156}
				}
				156 = {
					create_unit = {
					 	division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 10027
					}
				}	
			}
			if = {
				limit = {
					ITS = {owns_state = 117}
				}
				117 = {
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 6939
					}
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 883
					}
				}
			}
			if = {
				limit = {
					ITS = {owns_state = 115}
				}	
				115 = {
					create_unit = {
						division = "name = \"Milizia Repubblicana\" division_template = \"Milizia Repubblicana\" start_experience_factor = 0.3" 
						owner = ITA
						prioritize_location = 4014
					}
				}
			}
		}
	}
	#stay as republic
	option = {
		name = garibaldi.6.a
		ai_chance = { factor = 100 }
	}
	#For King and Stuff
	option = {
		name = garibaldi.6.b
		ai_chance = { factor = 0 }
		ITS = { change_tag_from = ROOT }
	}
}
#Italy fragmentation news event
news_event = {
	id = garibaldi.7
	title = garibaldi.7.t
	desc = garibaldi.7.d
	is_triggered_only = yes
	picture = GFX_news_event_fascist_militia
	major = yes
	option = {
		name = garibaldi.7.a
	}
}
# The coronation of the Kingdom of Italy
country_event = {
	id = garibaldi.8
	title = garibaldi.8.t
	desc = garibaldi.8.d
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		
	}
	option = {
		name = garibaldi.8.a
		ITS = {
			add_stability = 0.1

			# Ferdinant III of Bourbon-Two Sicilies
			hidden_effect = {
				create_country_leader = { 
					name = "Ferdinant III"
					expire="1935.1.1" 
					ideology = autocracy
					traits = { } 
				}

				set_rule = { can_join_factions = yes }

				create_faction = italian_federation
			}
		}
	}
}
# Italian Republic choose their government after losing their mainland.
country_event = {
	id = garibaldi.9
	title = garibaldi.9.t
	desc = garibaldi.9.desc
	fire_only_once = yes
	trigger = {
		tag = ITA
		ITA = {
			has_government = democratic
			has_war_with = SRI
			surrender_progress > 0.7
			NOT = { is_in_faction_with = ITS }
		}
	}
	immediate = {
		hidden_effect = {
			set_capital = 114
		}
	}
	option = {
		name = garibaldi.9.a
		ai_chance = { factor = 10 }
		ITA = {
			set_politics = {
				ruling_party = fascism
			}
		}
	}
	option = {
		name = garibaldi.9.b
		ai_chance = { factor = 15 }
		ITA = {
			add_war_support = 0.3
			add_stability = -0.07
		}
	}
	option = {
		ai_chance = { factor = 30 }
		name = garibaldi.9.c
		ITA = {
			drop_cosmetic_tag = yes
			set_cosmetic_tag = SRD

			if = {
				limit = {
					SRI = {
						controls_state = 2
					}
				}
				SRI ={
					transfer_state = 2
				}
			}

			hidden_effect = {
				if = {
					limit = {
						SRI = {
							controls_state = 835
						}
					}
					SRI ={
						transfer_state = 835
					}
				}

				if = {
					limit = {
						ITS = {
							controls_state = 2
						}
					}
					ITS ={
						transfer_state = 2
					}
				}

				if = {
					limit = {
						ITS = {
							controls_state = 835
						}
					}
					ITS ={
						transfer_state = 835
					}
				}
			}

			every_country = {
				limit = {
					has_war_with = ITA
				}
				white_peace = PREV
			}
			
			hidden_effect = {
				every_state = {
					limit = {
						is_core_of = ITA
					}
					remove_core_of = ITA
				}

				114 = {
					add_core_of = ITA
				}
				158 = {
					add_core_of = ITA
				}
			}
		}
	}
	option = {
		ai_chance = { factor = 60 }
		name = garibaldi.9.d
		ITA = {
			set_rule = { can_join_factions = yes }
			white_peace = ITS
		}
		ITS = {
			leave_faction = yes
			create_faction = italian_federation
			add_to_faction = ITA
		}
	}
}
# French Commune supports Italian Socialist Republic
country_event = {
	id = garibaldi.10
	title = garibaldi.10.t
	desc = garibaldi.10.d
	fire_only_once = yes
	trigger = {
		tag = FRA
		FRA = {
			has_government = communism
			has_war = no
		}
		SRI = {
			exists = yes
			has_war_with = ITS
			surrender_progress > 0.7
		}
	}
	option = {
		name = garibaldi.10.a
		ai_chance = { factor = 100 }
		FRA = {
			give_guarantee = ITS

			every_country = {
				limit = {
					has_war_with = SRI
				}

				FRA = {
					declare_war_on = {
						target = PREVPREV
						type = topple_government
					}
				}
			}
		}

		hidden_effect = {
			SRI = {
				dismantle_faction = yes
			}

			FRA = {
				set_rule = { can_join_factions = yes }
				create_faction = internationale
				add_to_faction = SRI
			}

			if = {
				limit = {
					NFA = {
						exists = yes
						NOT = { has_war_with = SRI }
					}
				}

				NFA = {
					country_event = { id = garibaldi.11 days = 3 }
				}
			}

			if = {
				limit = {
					AUH = {
						exists = yes
						NOT = { has_war_with = SRI }
					}
				}

				AUH = {
					country_event = { id = garibaldi.11 days = 3 }
				}
			}
		}
	}
	option = {
		name = garibaldi.10.b
		ai_chance = { factor = 0 }
		FRA = {
			add_war_support = -0.1
			add_stability = -0.05
		}
	}
}
# The response of National France and Austria when French Commune intervenes Italian civil war
country_event = {
	id = garibaldi.11
	title = garibaldi.11.t
	desc = garibaldi.11.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.11.a
		ai_chance = { factor = 100 }
		ROOT = {
			declare_war_on = {
				target = FRA
				type = topple_government
			}
			add_war_support = 0.1
			add_stability = -0.02
		}
	}
	option = {
		name = garibaldi.11.b
		ai_chance = { factor = 0 }
		ROOT = {
			add_war_support = -0.1
			add_stability = -0.01
		}
	}
}
# Socialists control the Rome
country_event = {
	id = garibaldi.12
	title = garibaldi.12.t
	desc = garibaldi.12.d
	fire_only_once = yes
	mean_time_to_happen = { days = 1 }
	trigger = {
		tag = SRI
		SRI = {
			controls_state = 835
			has_war_with = ITS
		}
	}
	option = {
		name = garibaldi.12.a
		ai_chance = { factor = 90 }
		news_event = { id = garibaldi.13 days = 1 }
		hidden_effect = {
			SRI = {
				add_named_threat = { threat = 5 name = garibaldi.13.t }
			}
			
			if = {
				limit = {
					AUH = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				AUH = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					AUS = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				AUS = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					FRA = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				FRA = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					NFA = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				NFA = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					HUN = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				HUN = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					SPR = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				SPR = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					POR = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				POR = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					CRO = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				CRO = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					SLO = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				SLO = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					POL = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				POL = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					GAL = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				GAL = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					CZE = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				CZE = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					LIT = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				LIT = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					BRA = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				BRA = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
			if = {
				limit = {
					MEX = {
						exists = yes
						NOT = { has_government = communism }
						is_subject = no
					}
				}
				MEX = {
					country_event = { id = garibaldi.14 days = 4 }
				}
			}
		}
	}
	option = {
		name = garibaldi.12.b
		ai_chance = { factor = 10 }
		add_war_support = -0.05
		add_stability = -0.01
	}
}
#Pope is killed
news_event = {
	id = garibaldi.13
	title = garibaldi.13.t
	desc = garibaldi.13.d
	#picture =
	major = yes
	is_triggered_only = yes
	option = {
		trigger = {
			tag = SRI
		}
		name = garibaldi.13.a
	}
	option = {
		trigger = {
			NOT = { tag = SRI }
		}
		name = garibaldi.13.b
	}
}
#Catholic countries issue ultimatum
country_event = {
	id = garibaldi.14
	title = garibaldi.14.t
	desc = garibaldi.14.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.14.a
		ai_chance = { factor = 100 }
		set_country_flag = sent_ultimatum_to_sri
	}
	option = {
		name = garibaldi.14.b
		ai_chance = { factor = 0 }
		add_war_support = -0.1
		add_stability = -0.1
	}
}
#Ultimatum
country_event = {
	id = garibaldi.15
	title = garibaldi.15.t
	desc = garibaldi.15.d
	fire_only_once = yes
	trigger = {
		tag = SRI
		any_country = { has_country_flag = sent_ultimatum_to_sri }
	}
	option = {
		name = garibaldi.15.a
		ai_chance = { factor = 100 }
		SRI = {
			country_event = { id = garibaldi.16 }
		}
	}
	option = {
		name = garibaldi.15.b
		ai_chance = { factor = 1 }
		every_country = {
			limit = {
				has_country_flag = sent_ultimatum_to_sri
			}
			declare_war_on = {
				target = SRI
				type = topple_government
			}
		}
	}
}
# Proposal of Peace Conference
country_event = {
	id = garibaldi.16
	title = garibaldi.16.t
	desc = garibaldi.16.d
	fire_only_once = yes
	trigger = {
		tag = ITS
		ITS = {
			has_war_with = SRI
			has_war_with = FRA
		}
	}
	mean_time_to_happen = { days = 30 }
	option = {
		name = garibaldi.16.a
		ai_chance = { factor = 100 }
		if = {
			limit = {
				tag = ITS
			}

			SRI = {
				country_event = { id = garibaldi.17 days = 7 }
			}

			if = {
				limit = {
					ITA = {
						has_war_with = ITS
					}
				}
				ITA = {
					country_event = { id = garibaldi.17 days = 7 }
				}
			}
		}

		if = {
			limit = {
				tag = SRI
			}

			ITS = {
				country_event = { id = garibaldi.17 days = 7 }
			}

			if = {
				limit = {
					ITA = {
						has_war_with = SRI
					}
				}
				ITA = {
					country_event = { id = garibaldi.17 days = 7 }
				}
			}
		}
	}
	option = {
		name = garibaldi.16.b
		ai_chance = { factor = 0 }
		trigger = {
			NOT = { tag = SRI }
		}
		add_stability = -0.1
	}
}
# Response on Peace Conference
country_event = {
	id = garibaldi.17
	title = garibaldi.17.t
	desc = garibaldi.17.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.17.a
		ai_chance = { factor = 100 }
		white_peace = FROM
		if = {
			limit = {
				tag = SRI
			}
			FRA = {
				white_peace = FROM

				if = {
					limit = {
						FRA = {
							has_war_with = NFA
						}
					}

					FRA = { white_peace = NFA }
				}

				if = {
					limit = {
						FRA = {
							has_war_with = AUH
						}
					}

					FRA = { white_peace = AUH }
				}
			}
		}
		if = {
			limit = {
				OR = {
					tag = ITA
					tag = ITS
				}
			}
			AUH = {
				white_peace = FROM

				if = {
					limit = {
						AUH = {
							has_war_with = FRA
						}
					}

					AUH = { white_peace = FRA }
				}
			}
			NFA = {
				white_peace = FROM

				if = {
					limit = {
						NFA = {
							has_war_with = FRA
						}
					}

					NFA = { white_peace = FRA }
				}
			}
		}
	}
	option = {
		name = garibaldi.17.b
		ai_chance = { factor = 0 }
		add_stability = -0.1
	}
}
# Aftermath of peace treaty
country_event = {
	id = garibaldi.18
	title = garibaldi.18.t
	desc = garibaldi.18.d
	fire_only_once = yes
	is_triggered_only = yes
	hidden = yes
	immediate = {
		if = {
			limit = {
				SRI = {
					is_in_faction_with = FRA
				}
			}
			SRI = {
				leave_faction = yes
			}
		}

		if = {
			limit = {
				SRI = {
					NOT = { is_in_faction = yes }
				}
			}
			SRI = {
				create_faction = italian_popular_front
			}
		}

		if = {
			limit = {
				ITS = { exists = yes }
			}
			ITS = {
				country_event = { id = garibaldi.19 }
			}
		}

		if = {
			limit = {
				ITA = {
					exists = yes
					NOT = { has_cosmetic_tag = SRD }
				}
			}
			ITA = {
				country_event = { id = garibaldi.20 }
			}
		}

		if = {
			limit = {
				any_country = {
					has_country_flag = sent_ultimatum_to_sri
				}
			}
			PAP = {
				transfer_state = 835
			}
		}

		if = {
			limit = {
				PAP = { exists = yes }
				2 = {
					is_owned_by = ITA
				}
			}
			PAP = {
				transfer_state = 2
			}
		}

		if = {
			limit = {
				835 = {
					is_owned_by = ITA
				}
			}
			ITS = {
				transfer_state = 835
			}
		}

		if = {
			limit = {
				2 = {
					is_owned_by = ITA
				}
			}
			SRI = {
				transfer_state = 2
			}
		}

		if = {
			limit = {
				PAP = {
					exists = yes
				}
			}

			ITS = {
				add_to_faction = PAP
			}
		}
	}
	option = {
		name = garibaldi.18.a
		ai_chance = { factor = 100 }
	}
}
# Two Sicilies or not
country_event = {
	id = garibaldi.19
	title = garibaldi.19.t
	desc = garibaldi.19.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.19.a
		ai_chance = { factor = 80 }
		drop_cosmetic_tag = yes
		set_cosmetic_tag = SIC
		add_stability = 0.2
		hidden_effect = {
			every_state = {
				limit = {
					is_core_of = ITS
				}
				remove_core_of = ITS
			}
			every_state = {
				limit = {
					is_claimed_by = ITS
				}
				remove_claim_by = ITS
			}
			every_state = {
				limit = {
					is_owned_by = ITS
				}
				add_core_of = ITS
			}
		}
	}
	option = {
		name = garibaldi.19.b
		ai_chance = { factor = 20 }
		add_stability = -0.1
	}
}
# Sardinia or not
country_event = {
	id = garibaldi.20
	title = garibaldi.20.t
	desc = garibaldi.20.d
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.20.a
		ai_chance = { factor = 70 }
		drop_cosmetic_tag = yes
		set_cosmetic_tag = SRD
		add_stability = 0.2
		hidden_effect = {
			every_state = {
				limit = {
					is_core_of = ITA
				}
				remove_core_of = ITA
			}
			every_state = {
				limit = {
					is_claimed_by = ITS
				}
				remove_claim_by = ITS
			}
			every_state = {
				limit = {
					is_owned_by = ITA
				}
				add_core_of = ITA
			}
			add_state_core = 158
		}
	}
	option = {
		name = garibaldi.20.b
		ai_chance = { factor = 30 }
		add_stability = -0.1
	}
}